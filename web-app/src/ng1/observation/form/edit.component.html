<div class="mdc-card observation-form-card">
  <div class="observation-header-text bottom-gap">
    {{$ctrl.formDefinition.name}}
  </div>

  <div ng-repeat="field in $ctrl.formDefinition.fields | filter:{archived: '!true'} | orderBy: 'id'">
    <div ng-switch on="field.type">
      <observation-edit-checkbox ng-switch-when="checkbox" [field]="field"></observation-edit-checkbox>
      <date-edit ng-switch-when="date" field="field" form-field="$ctrl.form[field.name]"></date-edit>
      <observation-edit-dropdown ng-switch-when="dropdown" [field]="field" (selection-change)="$ctrl.onSelectionChange()"></observation-edit-dropdown>
      <observation-edit-multiselectdropdown ng-switch-when="multiselectdropdown" [field]="field"></observation-edit-multiselectdropdown>
      <observation-edit-email ng-switch-when="email" [field]="field"></observation-edit-email>
      <geometry-edit ng-switch-when="geometry" 
        feature="{type: 'Feature', geometry: field.value, style: $ctrl.geometryStyle}" 
        field="field" 
        on-feature-changed="$ctrl.onGeometryChanged($event, field)" 
        on-feature-edit="$ctrl.onGeometryEdit($event)"></geometry-edit>
      <observation-edit-number ng-switch-when="numberfield" [field]="field"></observation-edit-number>
      <observation-edit-radio ng-switch-when="radio" [field]="field"></observatoin-edit-radio>
      <observation-edit-text ng-switch-when="textfield" [field]="field"></observation-edit-text> 
      <observation-edit-textarea ng-switch-when="textarea" [field]="field"></observation-edit-textarea>
    </div>
  </div>
  <span class="mdc-typography--caption">* indicates required field</span>
</div>
